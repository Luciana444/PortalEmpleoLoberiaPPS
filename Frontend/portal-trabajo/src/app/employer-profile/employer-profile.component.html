<app-header></app-header>
<div class="container">
    <div class="fallback">

        @if (currentUserType === 'empresa' || currentUserType === 'ciudadano'){
        <div>
            <i class="fa-solid fa-arrow-left" (click)="navigateToLanding()"></i> <a (click)="navigateToLanding()">
                Volver a
                ofertas</a>
        </div>

        }@else {
        <div>
            <i class="fa-solid fa-arrow-left" (click)="navigateToAdmin()"></i> <a (click)="navigateToAdmin()">
                Volver a
                Administraci√≥n</a>
        </div>
        <div class="container-options">
            @if (employer.estado_aprobacion === 'pendiente') {

            <div class="options-employer">
                <h5 class="pendiente-flag"><svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="M109.23-160 480-800l370.77 640H109.23Zm58.41-33.85h624.72L480-732.31 167.64-193.85Zm313.61-60.56q9.21 0 15.31-6.23 6.11-6.23 6.11-15.43 0-9.21-6.23-15.31-6.23-6.11-15.44-6.11-9.21 0-15.31 6.23t-6.1 15.44q0 9.2 6.23 15.31 6.23 6.1 15.43 6.1Zm-17.04-86.31h33.84v-207.79h-33.84v207.79ZM480-463.08Z"/></svg> Pendiente
                </h5>

                <button class="edit" (click)="changeEmployerStatus('aprobada')"> <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="M380.87-269.64 183.23-467.28l24.33-23.82 173.31 173.31 371.41-371.93 24.34 24.34-395.75 395.74Z"/></svg>
                    APROBAR</button>
                <button class="reject" (click)="changeEmployerStatus('rechazada')"> <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="M256-227.69 227.69-256l224-224-224-224L256-732.31l224 224 224-224L732.31-704l-224 224 224 224L704-227.69l-224-224-224 224Z"/></svg>
                    RECHAZAR</button>
            </div>
            } @else if (employer.estado_aprobacion === 'rechazada') {
            <div class="options-employer">
                <h5 class="reject-flag"><svg xmlns="http://www.w3.org/2000/svg" height="30x" viewBox="0 -960 960 960" width="30px"><path d="m336-307.69 144-144 144 144L652.31-336l-144-144 144-144L624-652.31l-144 144-144-144L307.69-624l144 144-144 144L336-307.69ZM480.13-120q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Zm-.13-40q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg> Rechazada</h5>

                <button class="edit" (click)="changeEmployerStatus('aprobada')"> <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="M380.87-269.64 183.23-467.28l24.33-23.82 173.31 173.31 371.41-371.93 24.34 24.34-395.75 395.74Z"/></svg>
                    APROBAR</button>
            </div>
            } @else if(employer.estado_aprobacion=== 'aprobada') {
            <div class="options-employer">
                <h5 class="check-flag"><svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="m422.46-323.69 255.85-255.85L650-607.85 422.46-380.31l-114-114L280.15-466l142.31 142.31ZM480.13-120q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Zm-.13-40q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg> Aprobada</h5>

                <button class="reject" (click)="changeEmployerStatus('rechazada')"> <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="M256-227.69 227.69-256l224-224-224-224L256-732.31l224 224 224-224L732.31-704l-224 224 224 224L704-227.69l-224-224-224 224Z"/></svg>
                    RECHAZAR</button>
            </div>
            }
        </div>
        }

    </div>
    <div class="container-profile">
        <app-employer-profile-sidebar [currentUserId]="currentUserId" [currentUserType]="currentUserType"
            [itemId]="itemId"></app-employer-profile-sidebar>
        <main>
            <div class="main-header">
                <h2>Ofertas</h2>
                <div class="create-offer">
                    @if (isOwnProfile) {
                    <button (click)="navigateToCreateOffer()">Crear Oferta</button>
                    }
                </div>
            </div>
            @if (offers.length) {
            @for (offer of offers; track offer.id) {
            <div class="postulation">
                <div class="postulation-header">
                    <h3>{{offer.puesto_requerido}}</h3>
                    <div class="state">
                        @if (offer.estado_publicacion === 'aprobada'){
                        <h5 class="check-flag"><svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="m422.46-323.69 255.85-255.85L650-607.85 422.46-380.31l-114-114L280.15-466l142.31 142.31ZM480.13-120q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Zm-.13-40q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>Aprobada </h5>
                        }@else if (offer.estado_publicacion === 'pendiente'){
                        <h5 class="pendiente-flag"><svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"><path d="M109.23-160 480-800l370.77 640H109.23Zm58.41-33.85h624.72L480-732.31 167.64-193.85Zm313.61-60.56q9.21 0 15.31-6.23 6.11-6.23 6.11-15.43 0-9.21-6.23-15.31-6.23-6.11-15.44-6.11-9.21 0-15.31 6.23t-6.1 15.44q0 9.2 6.23 15.31 6.23 6.1 15.43 6.1Zm-17.04-86.31h33.84v-207.79h-33.84v207.79ZM480-463.08Z"/></svg>Pendiente </h5>
                        }@else{
                        <h5 class="reject-flag"><svg xmlns="http://www.w3.org/2000/svg" height="30x" viewBox="0 -960 960 960" width="30px"><path d="m336-307.69 144-144 144 144L652.31-336l-144-144 144-144L624-652.31l-144 144-144-144L307.69-624l144 144-144 144L336-307.69ZM480.13-120q-74.67 0-140.41-28.34-65.73-28.34-114.36-76.92-48.63-48.58-76.99-114.26Q120-405.19 120-479.87q0-74.67 28.34-140.41 28.34-65.73 76.92-114.36 48.58-48.63 114.26-76.99Q405.19-840 479.87-840q74.67 0 140.41 28.34 65.73 28.34 114.36 76.92 48.63 48.58 76.99 114.26Q840-554.81 840-480.13q0 74.67-28.34 140.41-28.34 65.73-76.92 114.36-48.58 48.63-114.26 76.99Q554.81-120 480.13-120Zm-.13-40q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>Rechazada </h5>
                        }
                        <p>Publicado {{offer.fecha_publicacion | date:'longDate'}}</p>
                    </div>
                </div>
                <div class="postulation-body">
                    <p>{{offer.descripcion}}</p>
                    <button (click)="navigateToPostulationDetail(offer.id)">Ver Oferta</button>
                </div>
            </div>
            }
            }@else {
            <h3>No hay ofertas cargadas</h3>
            }
        </main>
    </div>

</div>
<app-footer></app-footer>